import{B as g}from"./BreadcrumbsComponent.9ca5c3f7.js";import{s as v}from"./default.css_vue_type_style_index_0_src_true_lang.40ff076f.js";import{$ as f}from"./dropzone.2615559f.js";import{_ as b,b as n,e as m,o as V,c as w,f as c,d as e,z as u,A as x,B as C,i as y,g as z,x as E,y as B}from"./app.84c357ef.js";import{v as k}from"./vue3-editor.common.6d626dfd.js";const I={name:"CreateView",components:{BreadcrumbsComponent:g,Multiselect:v,VueEditor:k.exports.VueEditor},mounted(){this.dropzone=new f(this.$refs.dropzone,{url:"/fsdfsdf",maxFiles:1,autoProcessQueue:!1,addRemoveLinks:!0}),this.getCategories(),this.getTags()},data(){return{categories:[],tags:[],title:"",content:"",status:!1}},methods:{getCategories(){n.get("/api/admin/blog/categories").then(t=>{this.categories=t.data.data}).catch(t=>{console.log(t)})},getTags(){n.get("/api/admin/blog/tags").then(t=>{this.tags=t.data.data}).catch(t=>{console.log(t)})},store(){let t=new FormData;this.dropzone.getActiveFiles().forEach(a=>{t.append("image",a)}),this.tags.value.forEach(a=>{t.append("tags[]",a)}),t.append("title",this.title),t.append("content",this.content),t.append("category_id",this.categories.value),t.append("status",this.status),n.post("/api/admin/blog/posts",t).then(a=>{console.log(a),this.title="",this.content="",this.status=!1,this.dropzone.removeAllFiles(),this.$wkToast(a.data.message,{horizontalPosition:"right",verticalPosition:"top",transition:"fade"})}).catch(a=>{console.log(a)})},imageHandler(t,s,a,_){console.log(t);let o=new FormData;o.append("image",t),n.post("/api/admin/images",o).then(d=>{const r=d.data.url;s.insertEmbed(a,"image",r),_()}).catch(d=>{console.log(d)})}}},l=t=>(E("data-v-15e97ef2"),t=t(),B(),t),P={class:"content-wrapper"},T={class:"content"},A={class:"container-fluid"},F={class:"card"},U=l(()=>e("div",{class:"card-header"},[e("h3",{class:"card-title"},"Create post")],-1)),M={class:"card-body"},S={class:"form-group mb-5"},D={class:"row"},H=l(()=>e("div",{class:"col-md-2"},[e("label",{for:"title"},"Post title")],-1)),N={class:"col-md-10"},L={class:"form-group mb-5"},Q={class:"row"},R=l(()=>e("div",{class:"col-md-2"},[e("label",null,"Category")],-1)),j={class:"col-md-10"},q={class:"form-group mb-5"},G={class:"row"},J=l(()=>e("div",{class:"col-md-2"},[e("label",null,"Title image")],-1)),K={class:"col-md-10"},O={ref:"dropzone",class:"dropzone p-3 text-white",id:"title_image"},W=l(()=>e("div",{class:"dz-message"},[e("h5",{class:"text-center"},"Add images")],-1)),X=[W],Y={class:"form-group mb-5"},Z={class:"row"},$=l(()=>e("div",{class:"col-md-2"},[e("label",null,"Content")],-1)),ee={class:"col-md-10"},te={class:"form-group mb-5"},se={class:"row"},oe=l(()=>e("div",{class:"col-md-2"},[e("label",null,"Tags")],-1)),ae={class:"col-md-10"},ie={class:"form-group mb-5"},le={class:"row"},de=l(()=>e("div",{class:"col-md-2"},[e("label",null,"Status")],-1)),ne={class:"col-md-10"},ce=z(" Published "),re={class:"card-footer"};function me(t,s,a,_,o,d){const r=m("BreadcrumbsComponent"),p=m("multiselect"),h=m("VueEditor");return V(),w("div",P,[c(r),e("section",T,[e("div",A,[e("div",F,[U,e("div",M,[e("div",S,[e("div",D,[H,e("div",N,[u(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=i=>o.title=i),id:"title",class:"form-control"},null,512),[[x,o.title]])])])]),e("div",L,[e("div",Q,[R,e("div",j,[c(p,{modelValue:o.categories.value,"onUpdate:modelValue":s[1]||(s[1]=i=>o.categories.value=i),valueProp:"id",label:"title",options:o.categories},null,8,["modelValue","options"])])])]),e("div",q,[e("div",G,[J,e("div",K,[e("div",O,X,512)])])]),e("div",Y,[e("div",Z,[$,e("div",ee,[c(h,{modelValue:o.content,"onUpdate:modelValue":s[2]||(s[2]=i=>o.content=i),useCustomImageHandler:"",onImageAdded:d.imageHandler},null,8,["modelValue","onImageAdded"])])])]),e("div",te,[e("div",se,[oe,e("div",ae,[c(p,{modelValue:o.tags.value,"onUpdate:modelValue":s[3]||(s[3]=i=>o.tags.value=i),id:"tags",mode:"tags","close-on-select":!1,searchable:!0,label:"title",valueProp:"id",options:o.tags},null,8,["modelValue","options"])])])]),e("div",ie,[e("div",le,[de,e("div",ne,[u(e("input",{type:"checkbox","onUpdate:modelValue":s[4]||(s[4]=i=>o.status=i)},null,512),[[C,o.status]]),ce])])])]),e("div",re,[e("button",{onClick:s[5]||(s[5]=y((...i)=>d.store&&d.store(...i),["prevent"])),type:"submit",class:"btn btn-primary"},"Create")])])])])])}const ve=b(I,[["render",me],["__scopeId","data-v-15e97ef2"]]);export{ve as default};
